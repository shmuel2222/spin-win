<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spin & Win</title>

<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg,#7b2ff7,#f107a3);
  font-family:Arial;
  color:white;
}

h1{margin-bottom:5px}
p{margin-top:0}

#wrapper{
  position:relative;
}

canvas{
  background:#fff;
  border-radius:50%;
}

#pointer{
  position:absolute;
  top:-10px;
  left:50%;
  transform:translateX(-50%);
  width:0;
  height:0;
  border-left:15px solid transparent;
  border-right:15px solid transparent;
  border-bottom:30px solid white;
}

button{
  margin-top:20px;
  padding:15px 40px;
  font-size:20px;
  border:none;
  border-radius:30px;
  background:#f1c40f;
  cursor:pointer;
}
</style>
</head>

<body>

<h1>ZA Spin & Win Big Prizes!</h1>
<p>Your chance to win today</p>

<div id="wrapper">
  <div id="pointer"></div>
  <canvas id="wheel" width="400" height="400"></canvas>
</div>

<button id="spinBtn">SPIN NOW</button>
<p style="font-size:12px">* Promotional game â€¢ No purchase required</p>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");

const prizes = [
  { img:"images/iphone.jpg", link:"https://example.com/iphone" },
  { img:"images/airtime.jpg", link:"https://example.com/airtime" },
  { img:"images/giftcard.jpg", link:"https://example.com/giftcard" },
  { img:"images/cash.jpg", link:"https://example.com/cash" }
];

const images = prizes.map(p=>{
  const i=new Image();
  i.src=p.img;
  return i;
});

const slice = 2*Math.PI/prizes.length;
let angle=0;
let spinning=false;

function draw(){
  ctx.clearRect(0,0,400,400);
  for(let i=0;i<prizes.length;i++){
    ctx.beginPath();
    ctx.moveTo(200,200);
    ctx.arc(200,200,190,angle+i*slice,angle+(i+1)*slice);
    ctx.fillStyle=["#f1c40f","#2ecc71","#3498db","#e67e22"][i];
    ctx.fill();

    ctx.save();
    ctx.translate(200,200);
    ctx.rotate(angle+i*slice+slice/2);
    ctx.drawImage(images[i],90,-30,60,60);
    ctx.restore();
  }
}

function spin(){
  if(spinning) return;
  spinning=true;

  let speed=Math.random()*0.4+0.5;
  const stopAt=Math.random()*2*Math.PI;

  const anim=setInterval(()=>{
    angle+=speed;
    speed*=0.97;
    draw();

    if(speed<0.01){
      clearInterval(anim);
      spinning=false;

      const index=Math.floor(
        (2*Math.PI-(angle%(2*Math.PI)))/slice
      )%prizes.length;

      window.location.href=prizes[index].link;
    }
  },20);
}

draw();
document.getElementById("spinBtn").onclick=spin;
</script>

</body>
</html>
