<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ZA Spin & Win</title>

<style>
body {
  margin: 0;
  height: 100vh;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #7b1fa2, #e91e63);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: #fff;
}

h1 {
  margin-bottom: 5px;
}

p {
  margin-top: 0;
}

#wheelContainer {
  position: relative;
  width: 320px;
  height: 320px;
  margin: 20px 0;
}

canvas {
  width: 320px;
  height: 320px;
}

#pointer {
  position: absolute;
  top: -15px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-bottom: 25px solid #fff;
}

button {
  background: #f9a825;
  border: none;
  padding: 14px 40px;
  font-size: 18px;
  border-radius: 30px;
  cursor: pointer;
  color: #000;
}
</style>
</head>

<body>

<h1>ZA Spin & Win Big Prizes!</h1>
<p>Your chance to win today ðŸŽ‰</p>

<div id="wheelContainer">
  <div id="pointer"></div>
  <canvas id="wheel" width="320" height="320"></canvas>
</div>

<button onclick="spin()">SPIN NOW</button>

<p style="font-size:12px;margin-top:10px">
* Promotional game â€¢ No purchase required
</p>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");

const prizes = [
  { text: "R1000", color: "#ff7043", link: "https://example.com/r1000" },
  { text: "iPhone", color: "#ffee58", link: "https://example.com/iphone" },
  { text: "Airtime", color: "#66bb6a", link: "https://example.com/airtime" },
  { text: "Gift Card", color: "#42a5f5", link: "https://example.com/gift" }
];

const center = 160;
const radius = 150;
const slice = (2 * Math.PI) / prizes.length;
let rotation = 0;
let spinning = false;

function drawWheel() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  prizes.forEach((prize, i) => {
    const start = rotation + i * slice;
    const end = start + slice;

    ctx.beginPath();
    ctx.moveTo(center, center);
    ctx.arc(center, center, radius, start, end);
    ctx.fillStyle = prize.color;
    ctx.fill();
    ctx.stroke();

    ctx.save();
    ctx.translate(center, center);
    ctx.rotate(start + slice / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "#000";
    ctx.font = "16px Arial";
    ctx.fillText(prize.text, radius - 10, 5);
    ctx.restore();
  });
}

drawWheel();

function spin() {
  if (spinning) return;
  spinning = true;

  const spinAngle = Math.random() * 2000 + 2000;
  const start = performance.now();

  function animate(time) {
    const progress = Math.min((time - start) / 3000, 1);
    rotation += (spinAngle * (1 - progress)) * 0.002;
    drawWheel();

    if (progress < 1) {
      requestAnimationFrame(animate);
    } else {
      spinning = false;

      const index =
        Math.floor(
          (prizes.length - (rotation % (2 * Math.PI)) / slice)
        ) % prizes.length;

      window.location.href = prizes[index].link;
    }
  }

  requestAnimationFrame(animate);
}
</script>

</body>
</html>
